openapi: 3.0.0
info:
  title: Butler API
  description: Butler API
  version: 1.0.0
servers:
  - url: https://api.example.com/v1
    description: 本番環境

paths:
  /api/signup:
    post:
      summary: サインアップ
      description: ユーザーサインアップ
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: ユーザーネーム
                email:
                  type: string
                  format: email
                  description: メールアドレス
                password:
                  type: string
                  description: パスワード
              required:
                - name
                - email
                - password
      responses:
        '201':
          description: ユーザー登録成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    description: ユーザーネーム
                  message:
                    type: string
                    description: メッセージ
                required:
                  - message
    
  /api/signin:
    post:
      summary: サインイン
      description: ユーザーサインイン
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: メールアドレス
                password:
                  type: string
                  description: パスワード
              required:
                - email
                - password
      responses:
        '200':
          description: ユーザー認証成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    description: ユーザーネーム
                  message:
                    type: string
                    description: メッセージ
                  token:
                    type: string
                    description: JWTトークン
                required:
                  - message

  /api/chats:
    get:
      summary: ユーザーのチャットルーム一覧
      description: ユーザーのチャットルームを全て取得
      responses:
        '200':
          description: チャットルーム取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  chats:
                    type: array
                    description: チャットルーム一覧
                    items:
                      type: object
                      properties:
                        chat_id:
                          type: string
                          description: チャットルームID
    post:
      summary: チャット新規作成
      description: チャット新規作成
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  description: private or group
                chat_name:
                  type: string
                  description: チャットルーム名
                participants:
                  type: array
                  description: チャット参加者
              required:
                - type
                - participants
      responses:
        '201':
          description: チャットルーム作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  chat_id:
                    type: string
                    description: チャットルームID
                  type:
                    type: string
                    description: private or group
                  chat_name:
                    type: string
                    description: チャットルーム名
                  participants:
                    type: array
                    items:
                      properties:
                        uid:
                          type: string
                          description: ユーザーID
                    description: チャット参加者
                  created_at:
                    type: string
                    format: date-time
                    description: チャットルーム作成日時
                  updated_at:
                    type: string
                    format: date-time
                    description: チャットルーム更新日時